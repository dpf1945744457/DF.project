"use strict";$(function(){$(".myyiguo").mouseenter(function(){$(".myyiguo>.con").css("display","block")}),$(".myyiguo").mouseleave(function(){$(".myyiguo>.con").css("display","none")}),$(".mobile").mouseenter(function(){$(".mobile>.con").css("display","block")}),$(".mobile").mouseleave(function(){$(".mobile>.con").css("display","none")});function a(n){localStorage.setItem("cart",JSON.stringify(n))}function i(){return JSON.parse(localStorage.getItem("cart"))||[]}function r(){var t=0,n=JSON.parse(localStorage.getItem("cart"));if(console.log(n),null!=localStorage.getItem("cart")){n.forEach(function(n){t+=n.num}),$(".total").html(t),console.log($(".total"));var e="<h2>购物车</h2>\n         <table>\n             <tr>\n                <td>商品图片</td>\n                <td>名称和规格</td>\n                <td>数量</td>\n                <td>价格</td>\n                <td>操作</td>\n            </tr>",c=0;i().forEach(function(n){c+=n.price*n.num,console.log(c),e+='<tr>\n                <td><img src="'.concat(n.pic,'"></td>\n                <td>').concat(n.name,'</td>\n                <td>\n                    <span class="jian">-</span>\n                    <span>').concat(n.num,'</span>\n                    <span class="jia">+</span>\n                </td>\n                <td>').concat(n.price*n.num,'</td>\n                <td>\n                    <a href="javascript:;" class="del">删除商品</a>\n                </td>\n            </tr>')}),e+='<tr>\n                <td></td>\n                <td></td>\n                <td style="font-size:20px;">'.concat(t,' 件商品</td>\n                <td style="font-size:20px;">总计￥').concat(c,'.00</td>\n                <td class="Clearing"><div>结算</div></td>\n            </tr>\n            </table>'),o.innerHTML=e,$(".del").on("click",function(){var t=$(this).parent().parent().children().eq(1).html();console.log(t);var n=i();a(n=n.filter(function(n){return n.name!=t})),r()}),$(".jian").on("click",function(){for(var n=i(),t=$(this).parent().parent().children().eq(1).html(),e=0;e<n.length;e++)if(n[e].name==t)return n[e].num--,n[e].num<=0&&(a(n=n.filter(function(n){return n.name!=t})),r()),a(n),void r();r()}),$(".jia").on("click",function(){for(var n=i(),t=$(this).parent().parent().children().eq(1).html(),e=0;e<n.length;e++)if(n[e].name==t)return n[e].num++,a(n),void r();r()})}}var o=document.getElementById("cart");r();var t="<h2>商品列表</h2><table>";t+="<tr>\n            <td>商品图片</td>\n            <td>名称和规格</td>\n            <td>数量</td>\n            <td>价格</td>\n            <td>操作</td>\n        </tr>",[{pic:"./img/111.jpg",name:"牛奶草莓",price:"38"},{pic:"./img/112.jpg",name:"柠檬",price:"10"},{pic:"./img/109.jpg",name:"苹果",price:"16"},{pic:"./img/113.jpg",name:"西瓜",price:"15"},{pic:"./img/110.jpg",name:"橙子",price:"25"},{pic:"./img/106.jpg",name:"葡萄 ",price:"25"},{pic:"./img/108.jpg",name:"水果捞 ",price:"213"}].forEach(function(n){t+="<tr>\n                <td><img src='".concat(n.pic,"'></td>\n                <td>").concat(n.name,"</td>\n                <td>1</td>\n                <td>").concat(n.price,'</td>\n                <td>\n                    <a href="javascript:;" class="addCart">加入购物车</a>\n                </td>\n            </tr>')}),t+="</table>",$("#list").html(t);var e=$(".addCart");$.each(e,function(n,t){e[n].onmousedown=function(){for(var n=$(this).parent().parent(),t={pic:n.children().eq(0).children().attr("src"),name:n.children().eq(1).html(),price:n.children().eq(3).html()},e=i(),c=0;c<e.length;c++)if(e[c].name==t.name)return e[c].num++,a(e),void r();t.num=1,e.push(t),a(e),r()}})});